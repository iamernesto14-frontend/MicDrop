<h2>All Anonymous Confessions</h2>

<div *ngIf="isLoading">Loading confessions...</div>
<div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

<table *ngIf="!isLoading && confessions.length > 0" class="confession-table">
  <thead>
    <tr>
      <th>#</th>
      <th>Message</th>
      <th>Category</th>
      <th>Emotion</th>
      <th>Status</th>
      <th>Date Submitted</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let confession of confessions; index as i">
      <td>{{ i + 1 }}</td>
      <td>{{ confession.message }}</td>
      <td>{{ confession.category }}</td>
      <td>{{ confession.emotion }}</td>
      <td>
        <span [class.approved]="confession.is_approved" [class.pending]="!confession.is_approved">
          {{ confession.is_approved ? 'Approved' : 'Pending' }}
        </span>
      </td>
      <td>{{ confession.created_at | date: 'medium' }}</td>
    </tr>
  </tbody>
</table>

<div *ngIf="!isLoading && confessions.length === 0">
  No confessions found.
</div>
